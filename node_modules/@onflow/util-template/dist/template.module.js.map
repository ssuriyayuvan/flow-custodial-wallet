{"version":3,"file":"template.module.js","sources":["../src/template.ts"],"sourcesContent":["import {log} from \"@onflow/util-logger\"\n\n/**\n * Interleaves two arrays\n * @param a - The first array\n * @param b - The second array\n * @param c - The target array\n * @returns The interleaved array\n */\nexport function interleave<A, B>(\n  a: A[] = [],\n  b: B[] = [],\n  c: (A | B)[] = []\n): (A | B)[] {\n  if (!a.length && !b.length) return c\n  if (!a.length) return c\n  if (!b.length) {\n    c.push(...a)\n    return c\n  }\n\n  const [aHead, ...aRest] = a\n  const [bHead, ...bRest] = b\n\n  if (aHead !== undefined) c.push(aHead)\n  if (bHead !== undefined) c.push(bHead)\n\n  return interleave(aRest, bRest, c)\n}\n\n/**\n * Recursively apply a value to a function\n * @param d - The value to apply\n * @returns A function that takes a function and applies the value to it\n */\nfunction recApply<T, U>(d: T): (x: U) => string {\n  return function (arg1) {\n    if (typeof arg1 === \"function\") {\n      log.deprecate({\n        pkg: \"FCL/SDK\",\n        subject: \"Interopolation of functions into template literals\",\n        transition:\n          \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n      })\n      return recApply(d)(arg1(d))\n    }\n    return String(arg1)\n  }\n}\n\n/**\n * Creates a template function\n * @param head - A string, template string array, or template function\n * @param rest - The rest of the arguments\n * @returns A template function\n */\nexport function template(\n  head: string | TemplateStringsArray | ((x?: unknown) => string),\n  ...rest: unknown[]\n): (x?: unknown) => string {\n  if (typeof head === \"string\") return () => head\n  if (typeof head === \"function\") return head\n  return (x: unknown) =>\n    interleave([...head], rest.map(recApply(x)))\n      .join(\"\")\n      .trim()\n}\n"],"names":["interleave","a","arguments","length","undefined","b","c","push","aHead","aRest","bHead","bRest","recApply","d","arg1","log","deprecate","pkg","subject","transition","String","template","head","_len","rest","Array","_key","x","map","join","trim"],"mappings":"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"}