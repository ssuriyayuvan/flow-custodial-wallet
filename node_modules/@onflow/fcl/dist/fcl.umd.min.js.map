{"version":3,"file":"fcl.umd.min.js","sources":["../src/utils/web/render-frame.js","../src/utils/web/render-pop.js","../src/utils/web/render-tab.js","../src/utils/web/default-config.js","../src/utils/web/strategies/utils/frame.js","../src/VERSION.js","../src/utils/web/strategies/utils/pop.js","../src/utils/web/strategies/utils/tab.js","../src/utils/web/strategies/utils/extension.js","../src/utils/web/exec-local.js","../src/utils/web/coreStrategies.js","../src/utils/web/strategies/iframe-rpc.js","../src/utils/web/strategies/pop-rpc.js","../src/utils/web/strategies/tab-rpc.js","../src/utils/web/strategies/ext-rpc.js","../src/utils/fcl-wc-loader.ts","../src/fcl.ts"],"sourcesContent":["import {invariant} from \"@onflow/util-invariant\"\n\nconst FRAME = \"FCL_IFRAME\"\n\nconst FRAME_STYLES = `\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n  color-scheme: light;\n`\n\nexport function renderFrame(src) {\n  invariant(\n    !document.getElementById(FRAME),\n    \"Attempt at triggering multiple Frames\",\n    {src}\n  )\n\n  const $frame = document.createElement(\"iframe\")\n  $frame.src = src\n  $frame.id = FRAME\n  $frame.allow = \"usb *; hid *\"\n  $frame.frameBorder = \"0\"\n  $frame.style.cssText = FRAME_STYLES\n  document.body.append($frame)\n\n  const unmount = () => {\n    if (document.getElementById(FRAME)) {\n      document.getElementById(FRAME).remove()\n    }\n  }\n\n  return [$frame.contentWindow, unmount]\n}\n","const POP = \"FCL_POP\"\n\nlet popup = null\nlet previousUrl = null\n\nfunction popupWindow(url, windowName, win, w, h) {\n  const y = win.top.outerHeight / 2 + win.top.screenY - h / 2\n  const x = win.top.outerWidth / 2 + win.top.screenX - w / 2\n  const popup = win.open(\n    url,\n    windowName,\n    `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${y}, left=${x}`\n  )\n  if (!popup)\n    throw new Error(\"Popup failed to open (was it blocked by a popup blocker?)\")\n  return popup\n}\n\nexport function renderPop(src) {\n  if (popup == null || popup?.closed) {\n    popup = popupWindow(src, POP, window, 640, 770)\n  } else if (previousUrl !== src) {\n    popup.location.replace(src)\n    popup.focus()\n  } else {\n    popup.focus()\n  }\n\n  previousUrl = src\n\n  const unmount = () => {\n    if (popup && !popup.closed) {\n      popup.close()\n    }\n    popup = null\n  }\n\n  return [popup, unmount]\n}\n","const TAB = \"FCL_TAB\"\n\nlet tab = null\nlet previousUrl = null\n\nexport function renderTab(src) {\n  if (tab == null || tab?.closed) {\n    tab = window.open(src, \"_blank\")\n    if (!tab)\n      throw new Error(\"Tab failed to open (was it blocked by the browser?)\")\n  } else if (previousUrl !== src) {\n    tab.location.replace(src)\n    tab.focus()\n  } else {\n    tab.focus()\n  }\n\n  previousUrl = src\n\n  const unmount = () => {\n    if (tab && !tab.closed) {\n      tab.close()\n    }\n    tab = null\n  }\n\n  return [tab, unmount]\n}\n","const isServerSide = () => typeof window === \"undefined\"\n\nconst getSessionStorage = () => {\n  try {\n    const SESSION_STORAGE = {\n      can: !isServerSide(),\n      get: async key => JSON.parse(sessionStorage.getItem(key)),\n      put: async (key, value) =>\n        sessionStorage.setItem(key, JSON.stringify(value)),\n    }\n    return SESSION_STORAGE\n  } catch (error) {\n    return null\n  }\n}\n\nexport const getDefaultConfig = () => {\n  return {\n    \"discovery.wallet.method.default\": \"IFRAME/RPC\",\n    \"fcl.storage.default\": getSessionStorage(),\n  }\n}\n","import {renderFrame} from \"../../render-frame\"\nimport {buildMessageHandler, serviceEndpoint} from \"@onflow/fcl-core\"\n\nconst noop = () => {}\n\nexport function frame(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  const handler = buildMessageHandler({\n    close,\n    send,\n    onReady,\n    onResponse,\n    onMessage,\n  })\n  window.addEventListener(\"message\", handler)\n\n  const [$frame, unmount] = renderFrame(serviceEndpoint(service))\n  return {send, close}\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler)\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Frame Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $frame.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Frame Send Error\", msg, error)\n    }\n  }\n}\n","export const VERSION = PACKAGE_CURRENT_VERSION || \"TESTVERSION\"\n","import {renderPop} from \"../../render-pop\"\nimport {buildMessageHandler, serviceEndpoint} from \"@onflow/fcl-core\"\n\nconst noop = () => {}\n\nexport function pop(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  const handler = buildMessageHandler({\n    close,\n    send,\n    onReady,\n    onResponse,\n    onMessage,\n  })\n  window.addEventListener(\"message\", handler)\n\n  const [$pop, unmount] = renderPop(serviceEndpoint(service))\n\n  const timer = setInterval(function () {\n    if ($pop && $pop.closed) {\n      close()\n    }\n  }, 500)\n\n  return {send, close}\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler)\n      clearInterval(timer)\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Popup Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $pop.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Popup Send Error\", msg, error)\n    }\n  }\n}\n","import {renderTab} from \"../../render-tab\"\nimport {buildMessageHandler, serviceEndpoint} from \"@onflow/fcl-core\"\n\nconst noop = () => {}\n\nexport function tab(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  const handler = buildMessageHandler({\n    close,\n    send,\n    onReady,\n    onResponse,\n    onMessage,\n  })\n  window.addEventListener(\"message\", handler)\n\n  const [$tab, unmount] = renderTab(serviceEndpoint(service))\n  const timer = setInterval(function () {\n    if ($tab && $tab.closed) {\n      close()\n    }\n  }, 500)\n\n  return {send, close}\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler)\n      clearInterval(timer)\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Tab Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $tab.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Tab Send Error\", msg, error)\n    }\n  }\n}\n","import {buildMessageHandler} from \"@onflow/fcl-core\"\n\nconst noop = () => {}\n\nexport function extension(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  const handler = buildMessageHandler({\n    close,\n    send,\n    onReady,\n    onResponse,\n    onMessage,\n  })\n  window.addEventListener(\"message\", handler)\n\n  send({service})\n\n  return {send, close}\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler)\n      onClose()\n    } catch (error) {\n      console.error(\"Ext Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      window && window.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Ext Send Error\", msg, error)\n    }\n  }\n}\n","import {renderFrame} from \"./render-frame\"\nimport {renderPop} from \"./render-pop\"\nimport {renderTab} from \"./render-tab\"\n\nconst NOT_IMPLEMENTED = () => {\n  throw new Error(\"Strategy util has not been implemented on this platform\")\n}\n\nconst VIEWS = {\n  \"VIEW/IFRAME\": renderFrame,\n  \"VIEW/POP\": renderPop,\n  \"VIEW/TAB\": renderTab,\n  \"VIEW/MOBILE_BROWSER\": NOT_IMPLEMENTED,\n  \"VIEW/DEEPLINK\": NOT_IMPLEMENTED,\n}\n\nexport async function execLocal(service, opts = {serviceEndpoint: () => {}}) {\n  const {serviceEndpoint} = opts\n  try {\n    return VIEWS[service.method](serviceEndpoint(service), opts)\n  } catch (error) {\n    console.error(\"execLocal({service, opts = {}})\", error, {service, opts})\n    throw error\n  }\n}\n","import {CORE_STRATEGIES, getExecHttpPost} from \"@onflow/fcl-core\"\nimport {execIframeRPC} from \"./strategies/iframe-rpc\"\nimport {execPopRPC} from \"./strategies/pop-rpc\"\nimport {execTabRPC} from \"./strategies/tab-rpc\"\nimport {execExtRPC} from \"./strategies/ext-rpc\"\nimport {execLocal} from \"./exec-local\"\n\nexport const coreStrategies = {\n  [CORE_STRATEGIES[\"HTTP/RPC\"]]: getExecHttpPost(execLocal),\n  [CORE_STRATEGIES[\"HTTP/POST\"]]: getExecHttpPost(execLocal),\n  [CORE_STRATEGIES[\"IFRAME/RPC\"]]: execIframeRPC,\n  [CORE_STRATEGIES[\"POP/RPC\"]]: execPopRPC,\n  [CORE_STRATEGIES[\"TAB/RPC\"]]: execTabRPC,\n  [CORE_STRATEGIES[\"EXT/RPC\"]]: execExtRPC,\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {frame} from \"./utils/frame\"\nimport {normalizePollingResponse} from \"@onflow/fcl-core\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport function execIframeRPC({service, body, config, opts}) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall\n\n    frame(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            fclVersion: VERSION,\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n          })\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n              deprecated: {\n                message:\n                  \"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n              },\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {pop} from \"./utils/pop\"\nimport {normalizePollingResponse} from \"@onflow/fcl-core\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport function execPopRPC({service, body, config, opts}) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const {redir, includeOlderJsonRpcCall} = opts\n\n    pop(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n          })\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              !redir && close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              !redir && close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {tab} from \"./utils/tab\"\nimport {normalizePollingResponse} from \"@onflow/fcl-core\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport function execTabRPC({service, body, config, opts}) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const {redir, includeOlderJsonRpcCall} = opts\n\n    tab(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n          })\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              !redir && close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              !redir && close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {extension} from \"./utils/extension\"\nimport {normalizePollingResponse} from \"@onflow/fcl-core\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport function execExtRPC({service, body, config, opts}) {\n  return new Promise((resolve, reject) => {\n    extension(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n          })\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execExtRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {config} from \"@onflow/config\"\nimport {pluginRegistry} from \"@onflow/fcl-core\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport * as fclWc from \"@onflow/fcl-wc\"\nimport {CoreTypes} from \"@walletconnect/types\"\n\nconst isServer = typeof window === \"undefined\"\n\nconst getMetadata = (config: {\n  \"app.detail.title\": string | undefined | null\n  \"app.detail.icon\": string | undefined | null\n  \"app.detail.description\": undefined | null\n  \"app.detail.url\": string | undefined | null\n}): CoreTypes.Metadata => {\n  const appTitle = config[\"app.detail.title\"]\n  const appIcon = config[\"app.detail.icon\"]\n  const appDescription = config[\"app.detail.description\"]\n  const appUrl = config[\"app.detail.url\"]\n\n  return {\n    name: appTitle ?? document.title,\n    description: appDescription ?? \"\",\n    url: appUrl ?? window.location.origin,\n    icons: appIcon ? [appIcon] : [],\n  }\n}\n\nexport function initFclWcLoader() {\n  // We cannot load WalletConnect plugin on server side\n  if (isServer) {\n    return\n  }\n\n  // Use previous configuration to check for changes & notify the user that this is not possible\n  let lastConfig: string | null = null\n\n  // Only the first configuration will be used\n  let hasLoaded = false\n\n  config.subscribe(async (fullConfig: any) => {\n    const wcConfig = {\n      \"walletconnect.projectId\": fullConfig[\"walletconnect.projectId\"],\n      \"app.detail.title\": fullConfig[\"app.detail.title\"],\n      \"app.detail.icon\": fullConfig[\"app.detail.icon\"],\n      \"app.detail.description\": fullConfig[\"app.detail.description\"],\n      \"app.detail.url\": fullConfig[\"app.detail.url\"],\n    }\n    const projectId: string | undefined = wcConfig[\"walletconnect.projectId\"]\n\n    // Check if the plugin is already loaded by this loader, but with different configuration\n    // The plugin can only be loaded once\n    const previousConfig = lastConfig\n    lastConfig = JSON.stringify(wcConfig, null, 2)\n    if (hasLoaded) {\n      if (previousConfig !== lastConfig) {\n        console.warn(\n          `FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.\n\nPrevious configuration:\n${previousConfig}\n\nCurrent configuration:\n${lastConfig}`\n        )\n      }\n      return\n    }\n\n    // If the configuration is not set, we do not load the plugin\n    const isConfigured = !!projectId\n    if (!isConfigured) {\n      return\n    }\n\n    invariant(\n      !!projectId,\n      \"FCL Configuration value for 'walletconnect.projectId' is required\"\n    )\n\n    // Check if the plugin is already loaded manually\n    // Usually this won't happen as it is more likely that the plugin will be loaded by this loader\n    // before the developer has a chance to load it manually, but it's good to check\n    if (pluginRegistry.getPlugins().has(fclWc.SERVICE_PLUGIN_NAME)) {\n      if (!hasLoaded) {\n        console.warn(\n          \"It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information.\"\n        )\n      }\n      hasLoaded = true\n      return\n    }\n    hasLoaded = true\n\n    // Load the plugin if not already loaded\n    // We must lazy load the plugin to avoid race conditions\n    // where the developer attempts to use the plugin before\n    // our loader applies the configuration\n    const {FclWcServicePlugin} = fclWc.initLazy({\n      projectId,\n      metadata: getMetadata(wcConfig),\n    })\n    pluginRegistry.add([FclWcServicePlugin])\n  })\n}\n","export {\n  VERSION,\n  query,\n  verifyUserSignatures,\n  serialize,\n  tx,\n  events,\n  pluginRegistry,\n  discovery,\n  t,\n  WalletUtils,\n  AppUtils,\n  InteractionTemplateUtils,\n  getChainId,\n  TestUtils,\n  config,\n  send,\n  decode,\n  account,\n  block,\n  isOk,\n  isBad,\n  why,\n  pipe,\n  build,\n  withPrefix,\n  sansPrefix,\n  display,\n  cadence,\n  cdc,\n  createSignableVoucher,\n  voucherIntercept,\n  voucherToTxId,\n  transaction,\n  script,\n  ping,\n  atBlockHeight,\n  atBlockId,\n  getAccount,\n  getEvents,\n  getEventsAtBlockHeightRange,\n  getEventsAtBlockIds,\n  getBlock,\n  getBlockHeader,\n  getCollection,\n  getTransactionStatus,\n  getTransaction,\n  getNetworkParameters,\n  getNodeVersionInfo,\n  authorizations,\n  authorization,\n  args,\n  arg,\n  proposer,\n  payer,\n  limit,\n  ref,\n  params,\n  param,\n  validator,\n  invariant,\n  subscribeEvents,\n  nodeVersionInfo,\n} from \"@onflow/fcl-core\"\n\nimport {getMutate, getCurrentUser, initServiceRegistry} from \"@onflow/fcl-core\"\n\nexport const mutate = getMutate({platform: \"web\"})\n\nconst currentUser = getCurrentUser({platform: \"web\"})\n\nexport {currentUser}\n\nexport const authenticate = (opts = {}) => currentUser().authenticate(opts)\nexport const unauthenticate = () => currentUser().unauthenticate()\nexport const reauthenticate = (opts = {}) => {\n  currentUser().unauthenticate()\n  return currentUser().authenticate(opts)\n}\nexport const signUp = (opts = {}) => currentUser().authenticate(opts)\nexport const logIn = (opts = {}) => currentUser().authenticate(opts)\n\nexport const authz = currentUser().authorization\n\nimport {config} from \"@onflow/config\"\nimport {getDefaultConfig, coreStrategies} from \"./utils/web\"\nimport {initFclWcLoader} from \"./utils/fcl-wc-loader\"\n\nconfig(getDefaultConfig())\n\ninitServiceRegistry({coreStrategies})\n\n// Automatically load fcl-wc plugin\n// Based on the user's config\ninitFclWcLoader()\n"],"names":["FRAME","FRAME_STYLES","renderFrame","src","invariant","document","getElementById","$frame","createElement","id","allow","frameBorder","style","cssText","body","append","contentWindow","unmount","remove","POP","popup","previousUrl","renderPop","closed","url","windowName","win","w","h","y","top","outerHeight","screenY","x","outerWidth","screenX","open","Error","popupWindow","window","location","replace","focus","close","tab","renderTab","getSessionStorage","can","get","async","JSON","parse","sessionStorage","getItem","key","put","value","setItem","stringify","error","noop","VERSION","NOT_IMPLEMENTED","VIEWS","execLocal","service","opts","arguments","length","undefined","serviceEndpoint","method","console","coreStrategies","CORE_STRATEGIES","getExecHttpPost","_ref","config","Promise","resolve","reject","uid","includeOlderJsonRpcCall","send","onClose","onMessage","onReady","onResponse","handler","buildMessageHandler","addEventListener","removeEventListener","msg","postMessage","frame","_","_ref2","type","fclVersion","params","data","deprecated","message","jsonrpc","e","_ref3","resp","normalizePollingResponse","status","reason","_ref4","result","redir","$pop","timer","setInterval","clearInterval","pop","$tab","extension","isServer","getMetadata","appTitle","appIcon","appDescription","appUrl","name","title","description","origin","icons","mutate","getMutate","platform","currentUser","getCurrentUser","authz","authorization","initServiceRegistry","lastConfig","hasLoaded","subscribe","wcConfig","fullConfig","projectId","previousConfig","warn","pluginRegistry","getPlugins","has","fclWc","SERVICE_PLUGIN_NAME","FclWcServicePlugin","initLazy","metadata","add","initFclWcLoader","authenticate","unauthenticate"],"mappings":"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"}